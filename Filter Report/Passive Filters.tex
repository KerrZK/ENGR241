\documentclass[11pt]{article}
\usepackage[letterpaper]{geometry}
\usepackage{times}
\usepackage{verbatim}
\usepackage{graphicx}
\usepackage{float}
\usepackage{fullwidth}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{fourier}
\usepackage{hyperref}
\graphicspath{{Images/}}
\title{ENGR-241 Passive Filters Lab}
\author{Jeremy Munson, Lauren Speirs \& Andrew Henrikson}
\geometry{top=.8in, bottom=.8in, left=.8in, right=.8in}

\setlength{\parindent}{0em}
\setlength{\parskip}{.5em}
\begin{document}
	\maketitle
	\subsection*{Overview}
	For this lab we designed and  constructed high and low pass filter circuits with RC components. We designed each circuit with a cutoff frequency of 10 KHz and used the signal generator to produce a 2V p-p sinusoidal waveform as the voltage source. We then swept the frequency between 1KHz and 100KHz and calculated the expected output voltage for given frequencies.
	\subsection*{Circuit Diagrams}
	Low Pass Filter: 
		\begin{figure}[H]
			\centering
			\includegraphics[width=3.5in]{images/low diagram.PNG}
		\end{figure}
	High Pass Filter:
		\begin{figure}[H]
		    \centering
		    \includegraphics[width=3.5in]{images/high diagram.PNG}
		\end{figure}
	  
	\subsection*{Calculations}
	The calculations for this circuit were performed by finding the transfer function for three different frequencies between 1KHz and 100KHz and the calculated value along with the given input function to determine the expected output voltage of our high and low pass filters.
	\subsubsection*{1. Calculate the transfer of the given LPF circuit.}
	
	$H(j\omega)=\frac{\frac{1}{RC}}{j\omega+\frac{1}{RC}}$\\
	$\omega_{1}=1KHz\cdot 2\pi=2,000\pi rad/s$\\
	$\omega_{2}=10KHz\cdot 2\pi=20,000\pi rad/s$\\
	$\omega_{3}=100KHz\cdot 2\pi=200,000\pi rad/s$\\\\
	$H(j\omega_{1})=\frac{\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}{j\cdot 2000\pi+\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}$\\
	$H(j\omega_{1})=0.995075 \angle-5.6890^{\circ} $\\\\
	$H(j\omega_{2})=\frac{\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}{j\cdot 20,000\pi+\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}$\\
	$H(j\omega_{2})=0.708452 \angle-44.8909^{\circ} $\\	\\
	$H(j\omega_{3})=\frac{\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}{j\cdot 200,000\pi+\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}$\\
	$H(j\omega_{3})=0.09988 \angle-84.2678^{\circ} $\\
	
	\subsubsection*{2. Use these values to construct the time domain function for each frequency.}
	
	$V_{o(1)}=0.995075cos(2000\pi t-5.68903)V$\\
	$V_{o(2)}=0.70845cos(20,000\pi t-44.8909)V$\\
	$V_{o(3)}=0.09988cos(200,000\pi t-84.2678)V$\\
	
	\subsubsection*{3. Calculate the transfer of the given HPF circuit.}
	
	$H(j\omega)=\frac{j\omega}{j\omega+\frac{1}{RC}}$\\\\
	$\omega_{1}=1KHz\cdot 2\pi=2,000\pi rad/s$\\
	$\omega_{2}=10KHz\cdot 2\pi=20,000\pi rad/s$\\
	$\omega_{3}=100KHz\cdot 2\pi=200,000\pi rad/s$\\\\
	$H(j\omega_{1})=\frac{j\cdot 2000\pi}{j\cdot 2000\pi+\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}$\\
	$H(j\omega_{1})=0.099129 \angle84.311^{\circ} $\\\\
	$H(j\omega_{2})=\frac{j\cdot 20,000\pi}{j\cdot 20,000\pi+\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}$\\
	$H(j\omega_{2})=0.705759 \angle45.1091^{\circ} $\\\\	
	$H(j\omega_{3})=\frac{j\cdot 200,000\pi}{j\cdot 200,000\pi+\frac{1}{1050\cdot 15.1 \cdot 10^{-9}}}$\\
	$H(j\omega_{3})=0.995 \angle5.73224^{\circ} $\\\\
	
	\subsubsection*{4. Use these values to construct the time domain function for each frequency.}
	
	$V_{o(1)}=0.099129cos(2000\pi t+84.311)V$\\
	$V_{o(2)}=0.705759cos(20,000\pi t+45.1091)V$\\
	$V_{o(3)}=0.995cos(200,000\pi t+5.73224)V$\\
	\subsection*{Procedure}
	The circuits were simple to construct using the breadboard. Aside from constructing the circuit as normal, we used the LCR meter to select a capacitor to minimize variance and to give us more accurate results between the ideal and observed circuits. After constructing the circuits, measurements were taken in the usual manner using the oscilloscope. We then swept the frequency through a large range with various waveforms to see the differentiating effect of the high pass filter. A sample of these outputs are shown below.
	

	\begin{figure}[H]
		\centering
		Square Wave - high frequency - Entire waveform passed with little distortion
		\includegraphics[width=5.5in]{images/tri_wave LF(cropped).jpg}
		
	\end{figure}
	
	\begin{figure}[H]
		\centering
		Square Wave - low frequency - "High frequency" square wave edge passed, "dc" of square wave blocked.
		\includegraphics[width=5.5in]{images/sq_wave LF.JPG}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		Triangle Wave - high frequency - Entire waveform passed with little distortion
		\includegraphics[width=5.5in]{images/tri_wave HF.JPG}
	\end{figure}

	\subsection*{Data Table}
	For the low pass and high pass filters we measured three frequencies each, and recorded the output amplitude.
	
	\begin{table}[H]
		\def\arraystretch{1.2}%
		\centering
		\begin{tabular}{|l|l|l|l|l|}
			\hline
			Filter		       	& Low Frequency(1khz)		& Cutoff Frequency(10khz)  	& 	High Frequency(100khz)	&\% Diff	\\ \hline
			HPF Measured  		& $200mV\Omega$				& $1.422v$   				& 2v\%	     				&100\%, +.6\%, 0\%			\\ \hline	
			HPF Expected		& $100mV \Omega$			& $1.414v $      			& 2v\%       				&-			\\ \hline
			LPF Measured		& $2.00v$					& $1.422v$					& 250mV						&0\%, +.6\%, 150\%			\\ \hline
			LPF Expected		& $2.00v$					& $1.414v$					& 100mV						&-			\\ \hline
		\end{tabular}
	\end{table}

It is worth noting that "High error" at low voltage amplitudes was likely caused by EMI in the lab - at very low voltages the oscilloscope probes are better antennas than probes.
	
	\subsection*{Error Analysis}
	Our suggested values and measured values for our components used are shown in the table below. The percent error is also listed.
		\begin{table}[H]
		\def\arraystretch{1.2}%
		\centering
		\begin{tabular}{|l|l|l|l|}
			\hline
			Components       	& Suggested 		& Measured      	&\% Diff	\\ \hline
			Resistor  	    	& $1 k\Omega$		& $1.05 k\Omega$   & 5\%	     \\ \hline	
			Capacitor			& $16 n F$			& $15.15 nF$		& -5.3\%		\\ \hline
		\end{tabular}
	\end{table}

	Other sources of error include tuning the oscilloscope to show less noise in the waveform, and periodically adjusting the signal generator to control the desired input frequency. With this in mind, our graphs were visually the same on the oscilloscope and PSpice.
	
	The error at the cutoff frequency is, essentially, due to the limitations of the oscilloscope. The voltage measurement in the oscilloscope can't display 1.414v; the closest possible measurement is 1.422. The error at the low voltages is due to the oscilloscope measuring the voltage peaks caused by EMI, rather than what our circuit is actually producing.
	\subsection*{Conclusion}
	The circuit itself was constructed using a breadboard, using components within the lab. The output shown on the oscilloscope was what we expected and had alligned with the simulation in PSpice and our calculations, showing very little overall error. 
	The high pass circuit shows an increase in the transfer function with the increase of omega. This means the ratio of $\frac{V_{o}}{V_{in}}$ approaches one, and that the output attempts to match the input at higher frequencies, effectively allowing the high frequencies to pass through the circuit. 
	The low pass circuit shows an inverse relationship to the high pass, in which the transfer function of $\frac{V_{o}}{V_{in}}$ approaches zero with an increase of omega, and allows only lower frequencies to pass through the circuit. 
	\newpage
	\subsection*{Appendix A: Photos}
	The RC low pass filter output vs input simulated in PSpice is shown below. 
	\begin{figure}[H]
		    \centering
		    \includegraphics[width=5in]{images/PSpice RC Low Pass.PNG}
		\end{figure}
	The RC high pass filter output vs input simulated in PSpice is shown below.
	\begin{figure}[H]
		    \centering
		    \includegraphics[width=5in]{images/RC High Pass.PNG}
		\end{figure}
	
	\end{document}
